<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Edition de Devis/Facture</title>
    <link rel="icon" type="image/png" href="https://airsoundlocation.ch/wp-content/uploads/2021/12/cropped-favicon.png">
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;600&display=swap" rel="stylesheet">
    <!-- Material-UI -->
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,500,700&display=swap" />
    <link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons" />
    <script src="https://unpkg.com/@material-ui/core@latest/umd/material-ui.production.min.js"></script>
    <style>
        .spacing { margin-bottom: 1em; }

        body, html {
            height: 100%;
            margin: 0;
            display: flex;
            align-items: center;
            justify-content: center;
            background-color: rgb(18, 18, 37);
        }

        .logo {
            display: block;
            margin-left: auto;
            margin-right: auto;
            width: 50%; /* increased from 50% to 70% */
            padding: 20px;
        }

        #choice-container {
            width: 300px;
            margin: 0 auto;
            text-align: center;
        }

        .btn-custom {
            color: #fff;
            background-color: #800FD4;
            border: none;
            margin-bottom: 10px;
        }

        .btn-custom:hover {
            background-color: #710EBB;
        }

        .clicked {
            background-color: #710EBB;
        }

        #choice-container {
            width: 300px;
            margin: 0 auto;
            margin-top: 50px;
            text-align: center;
        }

    </style>
</head>
<body>
    <div style="display: flex; flex-direction: column; align-items: center;">

    <div style="text-align: center; margin-bottom: 40px; margin-top: 60px;">
        <img src="https://airsoundlocation.ch/wp-content/uploads/2023/04/AirSoundwhite-1.png" alt="Airsound Logo" width="200">
    </div>

    <form id="emailForm" onsubmit="" style="max-width: 400px; margin: auto; font-family: Roboto, sans-serif;">
        <div style="display: flex; flex-direction: column; gap: 15px">

            <div style="margin-top: 20px;">
                <label>Civilit√© :</label>
                <div style="display: flex; align-items: center; gap: 10px; margin-top: 10px; margin-bottom: 10px;">
                    <div>
                        <input type="radio" id="male" name="gender" value="Monsieur" checked>
                        <label for="male">Monsieur</label>
                    </div>
                    <div>
                        <input type="radio" id="female" name="gender" value="Madame">
                        <label for="female">Madame</label>
                    </div>
                    <div>
                        <input type="radio" id="unspecified" name="gender" value="">
                        <label for="unspecified">Autre</label>
                    </div>
                </div>
            </div>
    </form>
    <div id="choice-container">
        <div id="initial-choice">
            <button class="btn btn-custom btn-lg btn-block" id="devis"><i class="bi bi-file-earmark-text"></i> Devis</button>
            <button class="btn btn-custom btn-lg btn-block" id="facture"><i class="bi bi-file-earmark-check"></i> Facture</button>
        </div>
        <div id="secondary-choice"></div>
        <div id="tertiary-choice"></div>
    </div>
    </div>
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            const initialDiv = document.querySelector('#initial-choice');
            const secondaryDiv = document.querySelector('#secondary-choice');
            const tertiaryDiv = document.querySelector('#tertiary-choice');

            addEventToButton('#devis', function() {
                resetDivs([secondaryDiv, tertiaryDiv]);
                secondaryDiv.innerHTML = `
                    <button class="btn btn-custom btn-lg btn-block" id="with-total"><i class="bi bi-check2-square"></i> Avec Total</button>
                    <button class="btn btn-custom btn-lg btn-block" id="without-total"><i class="bi bi-square"></i> Sans Total</button>
                `;
                addEventToButton('#without-total', function() {
                    window.open('https://docs.google.com/document/d/1VlrvgqlgyZPUUXBbOpvU2jNcNJGFeIqTFNCcgHY5ySM/edit?usp=drive_link');
                });
                addEventToButton('#with-total', createDeliveryOptions);
            });

            addEventToButton('#facture', function() {
                resetDivs([secondaryDiv, tertiaryDiv]);
                createDeliveryOptions();
            });

            function addEventToButton(id, callback) {
                const button = document.querySelector(id);
                button.addEventListener('click', function() {
                    unclickAll(initialDiv);
                    this.classList.add('clicked');
                    callback();
                });
            }

            function createDeliveryOptions() {
                secondaryDiv.innerHTML = `
                    <button class="btn btn-custom btn-lg btn-block" id="with-delivery"><i class="bi bi-truck"></i> Avec Livraison</button>
                    <button class="btn btn-custom btn-lg btn-block" id="without-delivery"><i class="bi bi-truck"></i> Sans Livraison</button>
                `;
                addEventToDeliveryOptions();
            }

            function addEventToDeliveryOptions() {
                const options = document.querySelectorAll('#secondary-choice button');
                options.forEach((option) => {
                    option.addEventListener('click', function() {
                        unclickAll(secondaryDiv);
                        this.classList.add('clicked');
                        createPackEventOptions();
                    });
                });
            }

            function createPackEventOptions() {
                tertiaryDiv.innerHTML = `
                    <button class="btn btn-custom btn-lg btn-block" id="perso"><i class="bi bi-person-square"></i> Formule Perso</button>
                    <button class="btn btn-custom btn-lg btn-block" id="pack"><i class="bi bi-box"></i> Pack</button>
                `;
                addEventToPackEventOptions();
            }

            function addEventToPackEventOptions() {
                const options = document.querySelectorAll('#tertiary-choice button');
                options.forEach((option) => {
                    option.addEventListener('click', function() {
                        unclickAll(tertiaryDiv);
                        this.classList.add('clicked');
                        if (this.id === 'perso') {
                            window.open('http://www.persolink.com');
                        } else {
                            window.open('http://www.packlink.com');
                        }
                    });
                });
            }

            function unclickAll(div) {
                const btns = div.querySelectorAll('.btn');
                btns.forEach(btn => btn.classList.remove('clicked'));
            }

            function resetDivs(divs) {
                divs.forEach(div => {
                    div.innerHTML = '';
                });
            }
        });
    </script>
</body>
</html>
